@!(model)

@function body() {
<div ng-controller="eventSpeakerController" ng-init="init('@model.event._id')">
    <div class="page-title">
        <a href="/showorg">
            <i class="icon-custom-left"></i>

            <h3>Job - <span class="semi-bold">@model.event.name</span></h3>

        </a>
    </div>
    <div class="well well-large">
        @render('./_uploadSpeakers', model)
    </div>
    <div class="row-fluid">
        <div class="span12">
            <div class="grid simple ">
                <div class="grid-title">
                    <h4>Speaker <span class="semi-bold">List</span></h4>

                    <div class="tools">
                        <a href="javascript:;" class="collapse"></a>
                        <a href="javascript:;" class="reload"></a>
                    </div>
                </div>
                <div class="grid-body ">
                    <table class="table table-hover table-condensed" id="datatable">
                        <thead>
                        <tr>
                            <th style="width:10%">Speaker Name</th>
                            <th style="width:22%" data-hide="phone,tablet">Session</th>
                            <th style="width:6%" data-hide="phone,tablet">Date/Time</th>
                            <th style="width:10%" data-hide="phone,tablet">Progress</th>
                        </tr>
                        </thead>
                        <tbody>

                        @for(var index = 0; index < model.event.sessions.length; index++)
                        {
                        @{ session = model.event.sessions[index] }

                        <tr>
                            <td class="v-align-middle muted">
                                @if (session.user.alias) {
                                    <a href="/@session.user.alias">@session.speakerFullName()</a>
                                } else {
                                    @session.speakerFullName()
                                }
                            </td>
                            <td class="v-align-middle"><span class="muted">@session.sessionInfo.name</span></td>
                            <td><span class="muted">@session.sessionInfo.startDateFormatted</span></td>
                            <td class="v-align-middle">
                                <div class="progress ">
                                    <div data-percentage="@(session.completePercent)%"
                                         class="animate-progress-bar progress-bar
                                            @translateStatus(session, model.eventSessionStatuses)"></div>
                                </div>
                            </td>
                        </tr>

                        }

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
}

@function translateStatus(session, statuses) {
@if(session.status == statuses.declined) {
progress-bar-danger
}else if(session.completePercent <= 33) {
progress-bar-warning
}else if(session.completePercent <= 66) {
progress-bar-primary
}else{
progress-bar-success
}
}

@render('../../shared/organizer-layout', body, model)